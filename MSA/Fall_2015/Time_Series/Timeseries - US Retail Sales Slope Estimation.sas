ods listing gpath = "%sysfunc(pathname(work))";
LIBNAME LWFETSP "C:\TimeSeriesData";

data check; set lwfetsp.US_Retail_Sales; 
ramp2 = (date-"01Nov2008"d)*(date>"01Nov2008"d); 
PREDTREND_DEC = 201198 + 1006.22*T -12896*RAMP + 13.47*RAMP2;
PREDTREND_AVG = PREDTREND_DEC +
  (-76001 -77474 -45879  -51412 -36885 -44959 
   -46332 -39425 -59746  -51844 -47285 + 0)/12; 

ODS GRAPHICS OFF; 
proc reg data=check; 
  model sales = T RAMP RAMP2 MON1-MON11; 
    OUTPUT OUT=SALESOUT PREDICTED=P RESIDUAL =R 
LCL=L95I UCL=U95I LCLM=L95M UCLM=U95M;
RUN; 

PROC SGPLOT DATA=SALESOUT; 
  SERIES y=P x=t; 
  SCATTER Y=SALES x=t;
  SERIES y=PREDTREND_DEC X=t/LINEATTRS = (COLOR=BLUE THICKNESS=3);  
  SERIES y=PREDTREND_AVG X=t/LINEATTRS = (COLOR=RED  THICKNESS=3); 
RUN;
